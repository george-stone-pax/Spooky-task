<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eldoria's Haunted Halls</title>
    <!-- 1. Tailwind CSS –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Google Font (Creepster) –¥–ª—è "—Ñ–∏—à–∫–∏" ‚Ññ1: –•—ç–ª–ª–æ—É–∏–Ω—Å–∫–∏–π –î–∏–∑–∞–π–Ω -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- 3. Tone.js –¥–ª—è "—Ñ–∏—à–∫–∏" ‚Ññ2: –ó–≤—É–∫–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* –û—á–µ–Ω—å —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω */
            color: #e0e0e0;
        }
        .halloween-title {
            font-family: 'Creepster', cursive;
            color: #ff6600; /* –Ø—Ä–∫–∏–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π */
            font-size: 3.5rem;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px #000;
        }
        .task-box {
            background-color: #2b2b2b;
            border: 1px solid #444;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }
        .spooky-button {
            font-family: 'Creepster', cursive;
            background-color: #ff6600;
            color: #1a1a1a;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1.2rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(255, 102, 0, 0.4);
        }
        .spooky-button:hover {
            background-color: #e65c00;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 102, 0, 0.6);
        }
        .ghost-hint-icon {
            cursor: pointer;
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }
        .ghost-hint-icon:hover {
            transform: scale(1.2) rotate(10deg);
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 p-4 md:p-8">

    <div class="max-w-4xl mx-auto">
        
        <header class="text-center mb-8">
            <h1 class="halloween-title">Eldoria's Haunted Halls</h1>
            <p class="text-xl text-orange-300">A B1/B2 English Challenge</p>
            
            <!-- –§–∏—à–∫–∞ ‚Ññ2: –ö–Ω–æ–ø–∫–∞ "Spooky Ambiance" -->
            <button id="soundButton" class="spooky-button mt-4">üéÉ Click for Ambiance üéÉ</button>
            <p id="soundMessage" class="text-sm text-gray-400 mt-2 hidden">(Sound is playing...)</p>
        </header>

        <!-- --- PART 1: THE TEXT --- -->
        <section class="task-box p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-orange-400">Task 1: The Story</h2>
            <p class="mb-4">Read the text about a strange problem at Eldoria University. The target vocabulary is in <strong>bold</strong>.</p>
            
            <div class="prose prose-invert max-w-none text-gray-300 space-y-4">
                <p>Eldoria University, famous for its Spectral Studies program, had a problem: student <strong>retention</strong> was at an all-time low. Students were leaving in panic. The cause? Barnaby, the usually <strong>personable</strong> ghost of the library, had suddenly become <strong>combative</strong>.</p>
                
                <p>Professor Anya Sharma, a new hire, thought the Dean's plan to just <strong>bypass</strong> the library entirely was a <strong>rash</strong> decision. The Dean, however, felt the new high-tech "Digital Hub" was the <strong>be-all and end-all</strong> of modern education and didn't want to deal with a "moody spirit."</p>
                
                <p>Anya decided to investigate. She found Barnaby weeping in the old bell tower. He felt <strong>slighted</strong>. "They're forgetting history!" he wailed. "They think new computers are everything."</p>
                
                <p>Anya realized the Dean's focus on technology had made the university's historical guardian feel obsolete. She convinced the Dean that ignoring the "spirit" of the school would be a mistake <strong>in the long run</strong>. The solution? They turned the library into a "Historical Haunts & Digital Hub" center, integrating the old with the new. Barnaby became the official "Spectral Curator," and student retention mysteriously crept back up.</p>
            </div>
        </section>

        <!-- --- PART 2: VOCABULARY CHECK --- -->
        <section class="task-box p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-orange-400">Task 2: Vocabulary Cauldron</h2>
            <p class="mb-4">Fill in the gaps with the correct target word from the story. 
                <!-- –§–∏—à–∫–∞ ‚Ññ3: –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ—Ç –ø—Ä–∏–∑—Ä–∞–∫–∞ -->
                <span id="ghostHintButton" class="ghost-hint-icon" title="Click for a hint!">üëª</span>
            </p>

            <!-- –§–∏—à–∫–∞ ‚Ññ4: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–≤–∏–∑ —Å —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–æ–π -->
            <div class="space-y-4">
                <!-- Question 1 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q1" class="flex-1 mb-2 sm:mb-0">1. The university was worried about student ______, as many were leaving.</label>
                    <input type="text" id="q1" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="retention">
                    <button onclick="checkAnswer('q1')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 2 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q2" class="flex-1 mb-2 sm:mb-0">2. Barnaby, who was normally friendly and ______, was now scaring people.</label>
                    <input type="text" id="q2" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="personable">
                    <button onclick="checkAnswer('q2')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 3 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q3" class="flex-1 mb-2 sm:mb-0">3. The Dean made a ______ decision to close the library immediately.</label>
                    <input type="text" id="q3" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="rash">
                    <button onclick="checkAnswer('q3')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 4 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q4" class="flex-1 mb-2 sm:mb-0">4. The ghost felt ______ because everyone was ignoring him for the new tech.</label>
                    <input type="text" id="q4" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="slighted">
                    <button onclick="checkAnswer('q4')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 5 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q5" class="flex-1 mb-2 sm:mb-0">5. The angry ghost became ______ and started throwing books.</label>
                    <input type="text" id="q5" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="combative">
                    <button onclick="checkAnswer('q5')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 6 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q6" class="flex-1 mb-2 sm:mb-0">6. The Dean thought his new Digital Hub was the ______ of education.</label>
                    <input type="text" id="q6" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="be-all and end-all">
                    <button onclick="checkAnswer('q6')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 7 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q7" class="flex-1 mb-2 sm:mb-0">7. Anya knew that ignoring history would be a mistake ______.</label>
                    <input type="text" id="q7" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="in the long run">
                    <button onclick="checkAnswer('q7')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
                <!-- Question 8 -->
                <div class="flex flex-col sm:flex-row sm:items-center">
                    <label for="q8" class="flex-1 mb-2 sm:mb-0">8. The Dean's first idea was to ______ the library and build a new wing.</label>
                    <input type="text" id="q8" class="bg-gray-800 border border-gray-600 rounded p-2 sm:w-40" data-answer="bypass">
                    <button onclick="checkAnswer('q8')" class="bg-orange-600 text-white p-2 rounded mt-2 sm:mt-0 sm:ml-2 hover:bg-orange-700">Check</button>
                </div>
            </div>
        </section>

        <!-- --- PART 3: CONNECT-EXTEND-CHALLENGE --- -->
        <section class="task-box p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-orange-400">Task 3: Connect, Extend, Challenge</h2>
            <p class="mb-6">Now, reflect on the story and its themes. Discuss these points with a partner or write down your thoughts.</p>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-2xl text-lime-400" style="font-family: 'Creepster', cursive; letter-spacing: 1px;">CONNECT üß†</h3>
                    <p>How does this story **connect** to what you already know about education? Have you ever felt that new technology or rules at your school ignored its history or 'spirit'? Describe a time you felt tradition and modernity were in conflict.</p>
                </div>
                
                <div>
                    <h3 class="text-2xl text-lime-400" style="font-family: 'Creepster', cursive; letter-spacing: 1px;">EXTEND üöÄ</h3>
                    <p>How does this story **extend** your thinking? Do you agree with Anya that respecting history is important for student <strong>retention</strong>, or do you think the Dean was right that modern tech is the <strong>be-all and end-all</strong>? Why?</p>
                </div>
                
                <div>
                    <h3 class="text-2xl text-lime-400" style="font-family: 'Creepster', cursive; letter-spacing: 1px;">CHALLENGE ‚ùì</h3>
                    <p>What do you still find **challenging** or confusing? What questions do you still have? (e.g., "Will the Dean truly respect Barnaby <strong>in the long run</strong>, or will he try to <strong>bypass</strong> him again?")</p>
                    
                    <!-- –§–∏—à–∫–∞ ‚Ññ5: "–û—Ç–ø—Ä–∞–≤–∫–∞" —Å–≤–æ–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ -->
                    <div class="mt-4">
                        <textarea id="challengeQuery" class="w-full h-24 bg-gray-800 border border-gray-600 rounded p-3" placeholder="Type your 'Challenge' question here..."></textarea>
                        <button id="submitChallenge" class="spooky-button mt-2">Send to the Spirits ü¶á</button>
                        <p id="submitMessage" class="text-sm text-lime-300 mt-2 hidden"></p>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è "–§–∏—à–∫–∏ ‚Ññ3" -->
    <div id="hintModal" class="modal-overlay hidden">
        <div class="task-box p-8 rounded-lg max-w-sm w-full relative">
            <button id="closeHint" class="absolute top-2 right-4 text-2xl text-gray-400 hover:text-white">&times;</button>
            <h3 class="halloween-title text-4xl text-center mb-4">A Ghostly Hint!</h3>
            <p class="text-center text-lg">"Pssst... a 'combative' person isn't friendly... they are ready to... <strong class='text-lime-400'>FIGHT!</strong> üëª"</p>
        </div>
    </div>


    <script>
        // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –§–∏—à–∫–∏ ‚Ññ2: –ó–≤—É–∫ ---
        const soundButton = document.getElementById('soundButton');
        const soundMessage = document.getElementById('soundMessage');
        let spookyNoise;

        soundButton.addEventListener('click', async () => {
            if (!spookyNoise) {
                await Tone.start();
                // –°–æ–∑–¥–∞–µ–º "–ø—Ä–∏–∑—Ä–∞—á–Ω—ã–π" –∑–≤—É–∫ –≤–µ—Ç—Ä–∞
                spookyNoise = new Tone.NoiseSynth({
                    noise: {
                        type: 'pink' // 'pink' or 'brown' noise sounds like wind
                    },
                    envelope: {
                        attack: 2,
                        decay: 1,
                        sustain: 0.5,
                        release: 3
                    }
                }).toDestination();
                
                // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç "–≤–æ—è" (Phaser)
                const phaser = new Tone.Phaser({
                    frequency: 0.5,
                    octaves: 3,
                    baseFrequency: 350
                }).toDestination();
                spookyNoise.connect(phaser);
            }
            
            spookyNoise.triggerAttackRelease("4n");
            soundMessage.classList.remove('hidden');
            soundButton.disabled = true;

            setTimeout(() => {
                soundMessage.classList.add('hidden');
                soundButton.disabled = false;
            }, 4000); // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤—É–∫–∞
        });

        // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –§–∏—à–∫–∏ ‚Ññ3: –ü–æ–¥—Å–∫–∞–∑–∫–∞ ---
        const hintButton = document.getElementById('ghostHintButton');
        const closeHintButton = document.getElementById('closeHint');
        const hintModal = document.getElementById('hintModal');

        hintButton.addEventListener('click', () => {
            hintModal.classList.remove('hidden');
        });
        closeHintButton.addEventListener('click', () => {
            hintModal.classList.add('hidden');
        });
        hintModal.addEventListener('click', (e) => {
            if (e.target === hintModal) {
                hintModal.classList.add('hidden');
            }
        });

        // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –§–∏—à–∫–∏ ‚Ññ4: –ö–≤–∏–∑ ---
        function checkAnswer(inputId) {
            const input = document.getElementById(inputId);
            const userAnswer = input.value.trim().toLowerCase();
            const correctAnswer = input.dataset.answer.toLowerCase();

            if (userAnswer === correctAnswer) {
                input.style.borderColor = '#4ade80'; // –ó–µ–ª–µ–Ω—ã–π (lime-400)
                input.style.backgroundColor = '#1c3d2a';
            } else {
                input.style.borderColor = '#f87171'; // –ö—Ä–∞—Å–Ω—ã–π (red-400)
                input.style.backgroundColor = '#451a1a';
            }
        }

        // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –§–∏—à–∫–∏ ‚Ññ5: –û—Ç–ø—Ä–∞–≤–∫–∞ ---
        const submitChallengeButton = document.getElementById('submitChallenge');
        const submitMessage = document.getElementById('submitMessage');
        const challengeQuery = document.getElementById('challengeQuery');

        submitChallengeButton.addEventListener('click', () => {
            if (challengeQuery.value.trim() === "") {
                submitMessage.textContent = "The spirits can't hear you... speak up!";
                submitMessage.classList.remove('hidden');
                submitMessage.classList.remove('text-lime-300');
                submitMessage.classList.add('text-red-400');
            } else {
                submitMessage.textContent = "The spirits are pondering your question... ü¶á";
                submitMessage.classList.remove('hidden');
                submitMessage.classList.remove('text-red-400');
                submitMessage.classList.add('text-lime-300');
                submitChallengeButton.disabled = true;
                challengeQuery.disabled = true;
            }
        });

    </script>

</body>
</html>

